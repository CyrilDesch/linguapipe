linguapipe {
  runtime {
    environment = "local"
  }

  grpc {
    host = "0.0.0.0"
    port = 9090
  }

  # Migration and initialization settings
  migrations {
    run-on-startup = true
    fail-on-error = true
  }

  # Declarative configuration for adapters
  adapters {
    
    driven {
      
      # Database
      # Options: postgres
      database {
        type = "postgres"
        
        postgres {
          host = "localhost"
          host = ${?DB_HOST}
          port = 5432
          database = "linguapipe"
          user = "linguapipe"
          password = "linguapipe"
          password = ${?DB_PASSWORD}
        }
      }
      
      # Vector Store
      # Options: qdrant
      vector-store {
        type = "qdrant"
        
        qdrant {
          url = "http://localhost:6333"
          url = ${?QDRANT_URL}
          api-key = ${?QDRANT_API_KEY}
          collection = "linguapipe"
        }
      }
      
      # Transcription
      # Options: whisper
      transcriber {
        type = "whisper"
        
        whisper {
          model-path = "base"
          api-url = "http://localhost:9001"
          api-url = ${?WHISPER_URL}
        }
      }
      
      
      # Embedder
      # Options: huggingface
      embedder {
        type = "huggingface"
        
        huggingface {
          model = "sentence-transformers/all-MiniLM-L6-v2"
          api-url = "http://localhost:8080"  # Text Embeddings Inference service
          api-url = ${?HUGGINGFACE_URL}
        }
      }
      
      # Blob Store
      # Options: minio
      blob-store {
        type = "minio"
        
        minio {
          endpoint = "http://localhost:9000"
          endpoint = ${?MINIO_ENDPOINT}
          access-key = "minioadmin"
          secret-key = "minioadmin"
          bucket = "linguapipe-blobs"
        }
      }
    }
    
    # Adapters Driving (Primaires)
    driving {
      
      # API Gateway
      # Options: grpc
      api {
        type = "grpc" 
        
        grpc {
          host = "0.0.0.0"
          port = 9090
        }
      }
    }
  }
}
